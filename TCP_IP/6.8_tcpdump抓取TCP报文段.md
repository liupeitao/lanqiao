#### tcpdump æŠ“å– TCP æŠ¥æ–‡æ®µ ğŸ˜€ğŸ˜€

2022å¹´3æœˆ27æ—¥18:25:38

---

ä¸Šä¸€èŠ‚å®éªŒï¼Œæˆ‘ä»¬ç”¨ tcpdump æŠ“å–å¹¶é˜…è¯»äº† UDP æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿™æ¬¡æˆ‘ä»¬å°è¯•æŠ“å– TCP æŠ¥æ–‡æ®µã€‚

é’ˆå¯¹è¿™æ¬¡å®éªŒï¼Œéœ€è¦ä¸‹è½½å¯¹åº”çš„ä»£ç æ–‡ä»¶ï¼Œæ˜¯åŸºäº TCP çš„èŠå¤©å°ç¨‹åºï¼Œåˆ†ä¸º serverï¼ˆæœåŠ¡ç«¯â€”ï¼‰å’Œ clientï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼š

```bash
wget https://labfile.oss.aliyuncs.com/courses/98/client.c
wget https://labfile.oss.aliyuncs.com/courses/98/server.c
gcc -o server server.c
gcc -o client client.c
```

ç¼–è¯‘å®Œæˆåå…ˆä¸è¦è¿è¡Œï¼Œå…ˆæ‰“å¼€ tcpdumpï¼Œä½¿ç”¨å‘½ä»¤å®‰è£…å¹¶è¿è¡Œ tcpdumpï¼š

```bash
sudo apt-get update
sudo apt-get install tcpdump
sudo tcpdump -vvv -X -i lo tcp port 7777
```

æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿è¡Œ server ç¨‹åºï¼š

```bash
./server 127.0.0.1
```

ç„¶åå†æ–°å¼€ç¬¬ä¸‰ä¸ªç»ˆç«¯ï¼Œè¿è¡Œ client ç¨‹åºï¼š

```bash
./client 127.0.0.1
```

ç°åœ¨ï¼Œä½¿ç”¨ client å’Œ server èŠå¤©ï¼Œè½®æµäº’å‘å‡ æ¡ç®€çŸ­çš„æ¶ˆæ¯ï¼ˆæ¯”å¦‚ helloã€hiã€wei ä¹‹ç±»çš„ï¼‰ä¾¿å¯ä»¥å…³é—­ client å’Œ serverï¼Œå›åˆ°è¿è¡Œ tcpdump çš„ç»ˆç«¯æŸ¥çœ‹æŠ“å–çš„æŠ¥æ–‡æ®µå†…å®¹ï¼š

![6-8-1](6.8_tcpdumpæŠ“å–TCPæŠ¥æ–‡.assets/tcp-6-08.png)

é€šè¿‡æŠ“å–çš„æŠ¥æ–‡ï¼Œè¿˜å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°å»ºç«‹è¿æ¥ä¸‰æ¬¡æ¡æ‰‹å’Œæ–­å¼€è¿æ¥å››æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚