#### 特殊变量

2022年4月13日18:09:40

---

#### 局部变量

这种变量只有在代码块或者函数中才可见。后面的实验会详细讲解。

#### 环境变量

这种变量将影响用户接口和 shell 的行为。

**在通常情况下，每个进程都有自己的“环境”，**这个环境是由一组变量组成的，这些变量中存有进程可能需要引用的信息。在这种情况下，shell 与一个一般的进程没什么区别。

#### 位置参数

从命令行传递到脚本的参数：`$0`，`$1`，`$2`，`$3`...

`$0` 就是脚本文件自身的名字，`$1` 是第一个参数，`$2` 是第二个参数，`$3` 是第三个参数，然后是第四个。`$9` 之后的位置参数就必须用大括号括起来了，比如，`${10}`，`${11}`，`${12}`。

- `$#` ： 传递到脚本的参数个数
- `$*` ： 以一个单字符串显示所有向脚本传递的参数。与位置变量不同,此选项参数可超过 9 个
- `$$` ： 脚本运行的当前进程 ID 号
- `$!` ： 后台运行的最后一个进程的进程 ID 号
- `$@` ： 与 `$*` 相同,但是使用时加引号,并在引号中返回每个参数
- `$`： 显示 shell 使用的当前选项,与 set 命令功能相同
- `$?` ： 显示最后命令的退出状态。 0 表示没有错误,其他任何值表明有错误。

> $* 和 $@ 都表示传递给函数或脚本的所有参数，我们已在《[Shell特殊变量](http://c.biancheng.net/view/806.html)》一节中进行了演示，本节重点说一下它们之间的区别。
>
> 当 $* 和 $@ 不被双引号`" "`包围时，它们之间没有任何区别，都是将接收到的每个参数看做一份数据，彼此之间以空格来分隔。
>
> 但是当它们被双引号`" "`包含时，就会有区别了：
>
> - `"$*"`会将所有的参数从整体上看做一份数据，而不是把每个参数都看做一份数据。
> - `"$@"`仍然将每个参数都看作一份数据，彼此之间是独立的。

#### 位置参数实例

这个十分重要，在我们运行一套脚本的时候，有时候是需要参数的，这里我们教大家如何获取参数。

```bash
vim test30.sh
```

输入代码（中文皆为注释，不用输入）：

```bash
#!/bin/bash

# 作为用例, 调用这个脚本至少需要10个参数, 比如：
# bash test.sh 1 2 3 4 5 6 7 8 9 10
MINPARAMS=10

echo

echo "The name of this script is \"$0\"."

echo "The name of this script is \"`basename $0`\"."


echo

if [ -n "$1" ]              # 测试变量被引用.
then
echo "Parameter #1 is $1"  # 需要引用才能够转义"#"
fi

if [ -n "$2" ]
then
echo "Parameter #2 is $2"
fi

if [ -n "${10}" ]  # 大于$9的参数必须用{}括起来.
then
echo "Parameter #10 is ${10}"
fi

echo "-----------------------------------"
echo "All the command-line parameters are: "$*""

if [ $# -lt "$MINPARAMS" ]
then
 echo
 echo "This script needs at least $MINPARAMS command-line arguments!"
fi

echo

exit 0
```

运行代码：

```bash
bash test30.sh 1 2 10


The name of this script is "test.sh".
The name of this script is "test.sh".

Parameter #1 is 1
Parameter #2 is 2
-----------------------------------
All the command-line parameters are: 1 2 10

This script needs at least 10 command-line arguments!
```



